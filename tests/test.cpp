#include <gtest/gtest.h>
#include "FTPdriver.h"

using boost::filesystem::all_all;

TEST(FTPdriver, testing_driver_search) {
    std::string ans = "ib balance_00100003_20180904.txt\n"
                      "ib balance_00100003_20181014.txt\n"
                      "ib balance_00100002_20180903.txt\n"
                      "ib balance_00100002_20180905.txt\n"
                      "ib balance_00100002_20181017.txt\n"
                      "ib balance_00100002_20180930.txt\n"
                      "ib balance_00100002_20181005.txt\n"
                      "ib balance_00100001_20180923.txt\n"
                      "ib balance_00100003_20180916.txt\n"
                      "ib balance_00100003_20180920.txt\n"
                      "ib balance_00100001_20181007.txt\n"
                      "ib balance_00100001_20180902.txt\n"
                      "ib balance_00100002_20181003.txt\n"
                      "ib balance_00100003_20180912.txt\n"
                      "ib balance_00100001_20181017.txt\n"
                      "ib balance_00100001_20180914.txt\n"
                      "ib balance_00100002_20180917.txt\n"
                      "ib balance_00100002_20180922.txt\n"
                      "ib balance_00100001_20180920.txt\n"
                      "ib balance_00100001_20181013.txt\n"
                      "ib balance_00100002_20181011.txt\n"
                      "ib balance_00100002_20181012.txt\n"
                      "ib balance_00100003_20180908.txt\n"
                      "ib balance_00100002_20180911.txt\n"
                      "ib balance_00100003_20181013.txt\n"
                      "ib balance_00100003_20180918.txt\n"
                      "ib balance_00100003_20181001.txt\n"
                      "ib balance_00100001_20181011.txt\n"
                      "ib balance_00100003_20180902.txt\n"
                      "ib balance_00100002_20180920.txt\n"
                      "ib balance_00100003_20180903.txt\n"
                      "ib balance_00100001_20180928.txt\n"
                      "ib balance_00100001_20181005.txt\n"
                      "ib balance_00100002_20180928.txt\n"
                      "ib balance_00100003_20180914.txt\n"
                      "ib balance_00100001_20180912.txt\n"
                      "ib balance_00100003_20180927.txt\n"
                      "ib balance_00100001_20180927.txt\n"
                      "ib balance_00100001_20180929.txt\n"
                      "ib balance_00100002_20180921.txt\n"
                      "ib balance_00100003_20181008.txt\n"
                      "ib balance_00100003_20180913.txt\n"
                      "ib balance_00100002_20181010.txt\n"
                      "ib balance_00100001_20180930.txt\n"
                      "ib balance_00100001_20180919.txt\n"
                      "ib balance_00100002_20180901.txt\n"
                      "ib balance_00100002_20180926.txt\n"
                      "ib balance_00100002_20181004.txt\n"
                      "ib balance_00100002_20181016.txt\n"
                      "ib balance_00100002_20180912.txt\n"
                      "ib balance_00100001_20180924.txt\n"
                      "ib balance_00100002_20181007.txt\n"
                      "ib balance_00100002_20180907.txt\n"
                      "ib balance_00100002_20181015.txt\n"
                      "ib balance_00100001_20180915.txt\n"
                      "ib balance_00100003_20181004.txt\n"
                      "ib balance_00100001_20180905.txt\n"
                      "ib balance_00100002_20181009.txt\n"
                      "ib balance_00100002_20180929.txt\n"
                      "ib balance_00100003_20180919.txt\n"
                      "ib balance_00100001_20180911.txt\n"
                      "ib balance_00100002_20180915.txt\n"
                      "ib balance_00100001_20180913.txt\n"
                      "ib balance_00100001_20181008.txt\n"
                      "ib balance_00100002_20180925.txt\n"
                      "ib balance_00100001_20181018.txt\n"
                      "ib balance_00100001_20181009.txt\n"
                      "ib balance_00100002_20180909.txt\n"
                      "ib balance_00100002_20180927.txt\n"
                      "ib balance_00100003_20180917.txt\n"
                      "ib balance_00100001_20181015.txt\n"
                      "ib balance_00100002_20180914.txt\n"
                      "ib balance_00100001_20181003.txt\n"
                      "ib balance_00100001_20180903.txt\n"
                      "ib balance_00100002_20181014.txt\n"
                      "ib balance_00100003_20181003.txt\n"
                      "ib balance_00100003_20181017.txt\n"
                      "ib balance_00100002_20180910.txt\n"
                      "ib balance_00100003_20180928.txt\n"
                      "ib balance_00100002_20181013.txt\n"
                      "ib balance_00100002_20180916.txt\n"
                      "ib balance_00100001_20181006.txt\n"
                      "ib balance_00100003_20180909.txt\n"
                      "ib balance_00100001_20181002.txt\n"
                      "ib balance_00100002_20180908.txt\n"
                      "ib balance_00100002_20180904.txt\n"
                      "ib balance_00100002_20181018.txt\n"
                      "ib balance_00100001_20180908.txt\n"
                      "ib balance_00100001_20180925.txt\n"
                      "ib balance_00100001_20180926.txt\n"
                      "ib balance_00100003_20181011.txt\n"
                      "ib balance_00100003_20180911.txt\n"
                      "ib balance_00100002_20180902.txt\n"
                      "ib balance_00100003_20180915.txt\n"
                      "ib balance_00100003_20180922.txt\n"
                      "ib balance_00100002_20180918.txt\n"
                      "ib balance_00100002_20181008.txt\n"
                      "ib balance_00100001_20180921.txt\n"
                      "ib balance_00100002_20180919.txt\n"
                      "ib balance_00100001_20181004.txt\n"
                      "ib balance_00100003_20180905.txt\n"
                      "ib balance_00100002_20180913.txt\n"
                      "ib balance_00100003_20180923.txt\n"
                      "ib balance_00100001_20180907.txt\n"
                      "ib balance_00100001_20180910.txt\n"
                      "ib balance_00100003_20180907.txt\n"
                      "ib balance_00100001_20181016.txt\n"
                      "ib balance_00100003_20181007.txt\n"
                      "ib balance_00100003_20181005.txt\n"
                      "ib balance_00100003_20180924.txt\n"
                      "ib balance_00100002_20180924.txt\n"
                      "ib balance_00100003_20180925.txt\n"
                      "ib balance_00100003_20180926.txt\n"
                      "ib balance_00100002_20181006.txt\n"
                      "ib balance_00100001_20181014.txt\n"
                      "ib balance_00100001_20180901.txt\n"
                      "ib balance_00100001_20180916.txt\n"
                      "ib balance_00100002_20181001.txt\n"
                      "ib balance_00100003_20181012.txt\n"
                      "ib balance_00100001_20180918.txt\n"
                      "ib balance_00100001_20181010.txt\n"
                      "ib balance_00100002_20181002.txt\n"
                      "ib balance_00100003_20180921.txt\n"
                      "ib balance_00100001_20181001.txt\n"
                      "ib balance_00100003_20181009.txt\n"
                      "ib balance_00100003_20180929.txt\n"
                      "ib balance_00100003_20181010.txt\n"
                      "ib balance_00100003_20180930.txt\n"
                      "ib balance_00100001_20180906.txt\n"
                      "ib balance_00100001_20180904.txt\n"
                      "ib balance_00100001_20180917.txt\n"
                      "ib balance_00100003_20180906.txt\n"
                      "ib balance_00100003_20180901.txt\n"
                      "ib balance_00100001_20180909.txt\n"
                      "ib balance_00100003_20181016.txt\n"
                      "ib balance_00100003_20181015.txt\n"
                      "ib balance_00100002_20180906.txt\n"
                      "ib balance_00100003_20181002.txt\n"
                      "ib balance_00100003_20180910.txt\n"
                      "ib balance_00100001_20181012.txt\n"
                      "ib balance_00100001_20180922.txt\n"
                      "ib balance_00100002_20180923.txt\n"
                      "ib balance_00100003_20181006.txt\n"
                      "otkritie balance_03934520_20180919.txt\n"
                      "otkritie balance_03934520_20180915.txt\n"
                      "otkritie balance_03934523_20181002.txt\n"
                      "otkritie balance_03934523_20181010.txt\n"
                      "otkritie balance_03934523_20180929.txt\n"
                      "otkritie balance_03934523_20180902.txt\n"
                      "otkritie balance_03934520_20181006.txt\n"
                      "otkritie balance_03934523_20180912.txt\n"
                      "otkritie balance_03934520_20180924.txt\n"
                      "otkritie balance_03934523_20181009.txt\n"
                      "otkritie balance_03934523_20180928.txt\n"
                      "otkritie balance_03934523_20180909.txt\n"
                      "otkritie balance_03934520_20181001.txt\n"
                      "otkritie balance_03934523_20180926.txt\n"
                      "otkritie balance_03934520_20180928.txt\n"
                      "otkritie balance_03934523_20180924.txt\n"
                      "otkritie balance_03934523_20181016.txt\n"
                      "otkritie balance_03934523_20180901.txt\n"
                      "otkritie balance_03934520_20181015.txt\n"
                      "otkritie balance_03934520_20181002.txt\n"
                      "otkritie balance_03934523_20180921.txt\n"
                      "otkritie balance_03934523_20181001.txt\n"
                      "otkritie balance_03934523_20180930.txt\n"
                      "otkritie balance_03934520_20181007.txt\n"
                      "otkritie balance_03934523_20181008.txt\n"
                      "otkritie balance_03934523_20181014.txt\n"
                      "otkritie balance_03934520_20180914.txt\n"
                      "otkritie balance_03934523_20180914.txt\n"
                      "otkritie balance_03934520_20181008.txt\n"
                      "otkritie balance_03934520_20180920.txt\n"
                      "otkritie balance_03934523_20180919.txt\n"
                      "otkritie balance_03934523_20180910.txt\n"
                      "otkritie balance_03934523_20180905.txt\n"
                      "otkritie balance_03934523_20180922.txt\n"
                      "otkritie balance_03934523_20181011.txt\n"
                      "otkritie balance_03934520_20181012.txt\n"
                      "otkritie balance_03934523_20180916.txt\n"
                      "otkritie balance_03934520_20181004.txt\n"
                      "otkritie balance_03934520_20180903.txt\n"
                      "otkritie balance_03934520_20180927.txt\n"
                      "otkritie balance_03934523_20180908.txt\n"
                      "otkritie balance_03934520_20181016.txt\n"
                      "otkritie balance_03934520_20181013.txt\n"
                      "otkritie balance_03934520_20180908.txt\n"
                      "otkritie balance_03934523_20181013.txt\n"
                      "otkritie balance_03934520_20180925.txt\n"
                      "otkritie balance_03934520_20180910.txt\n"
                      "otkritie balance_03934523_20181003.txt\n"
                      "otkritie balance_03934523_20180904.txt\n"
                      "otkritie balance_03934523_20180925.txt\n"
                      "otkritie balance_03934520_20180904.txt\n"
                      "otkritie balance_03934523_20181007.txt\n"
                      "otkritie balance_03934520_20180929.txt\n"
                      "otkritie balance_03934520_20180906.txt\n"
                      "otkritie balance_03934520_20180912.txt\n"
                      "otkritie balance_03934523_20180917.txt\n"
                      "otkritie balance_03934523_20180906.txt\n"
                      "otkritie balance_03934520_20181005.txt\n"
                      "otkritie balance_03934520_20180921.txt\n"
                      "otkritie balance_03934520_20181014.txt\n"
                      "otkritie balance_03934523_20180923.txt\n"
                      "otkritie balance_03934523_20180911.txt\n"
                      "otkritie balance_03934520_20180923.txt\n"
                      "otkritie balance_03934520_20180918.txt\n"
                      "otkritie balance_03934520_20181011.txt\n"
                      "otkritie balance_03934520_20181003.txt\n"
                      "otkritie balance_03934523_20180915.txt\n"
                      "otkritie balance_03934523_20180913.txt\n"
                      "otkritie balance_03934520_20181017.txt\n"
                      "otkritie balance_03934520_20180917.txt\n"
                      "otkritie balance_03934523_20181017.txt\n"
                      "otkritie balance_03934520_20181018.txt\n"
                      "otkritie balance_03934523_20181005.txt\n"
                      "otkritie balance_03934523_20180920.txt\n"
                      "otkritie balance_03934520_20180922.txt\n"
                      "otkritie balance_03934520_20180905.txt\n"
                      "otkritie balance_03934523_20180918.txt\n"
                      "otkritie balance_03934520_20180907.txt\n"
                      "otkritie balance_03934523_20180927.txt\n"
                      "otkritie balance_03934523_20181004.txt\n"
                      "otkritie balance_03934520_20180913.txt\n"
                      "otkritie balance_03934523_20181006.txt\n"
                      "otkritie balance_03934520_20180926.txt\n"
                      "otkritie balance_03934520_20181010.txt\n"
                      "otkritie balance_03934520_20180901.txt\n"
                      "otkritie balance_03934520_20180909.txt\n"
                      "otkritie balance_03934520_20180902.txt\n"
                      "otkritie balance_03934520_20180930.txt\n"
                      "otkritie balance_03934523_20181015.txt\n"
                      "otkritie balance_03934520_20180911.txt\n"
                      "otkritie balance_03934520_20180916.txt\n"
                      "otkritie balance_03934523_20180903.txt\n"
                      "otkritie balance_03934523_20181012.txt\n"
                      "otkritie balance_03934523_20180907.txt\n"
                      "otkritie balance_03934520_20181009.txt\n"
                      "bcs balance_00143456_20181004.txt\n"
                      "bcs balance_00123456_20180902.txt\n"
                      "bcs balance_00143456_20180904.txt\n"
                      "bcs balance_00122223_20181002.txt\n"
                      "bcs balance_00123458_20181011.txt\n"
                      "bcs balance_00122223_20181009.txt\n"
                      "bcs balance_00123458_20181017.txt\n"
                      "bcs balance_00122223_20180929.txt\n"
                      "bcs balance_00123458_20180905.txt\n"
                      "bcs balance_00123458_20180914.txt\n"
                      "bcs balance_00123458_20180908.txt\n"
                      "bcs balance_00143456_20181015.txt\n"
                      "bcs balance_00123456_20180905.txt\n"
                      "bcs balance_00143456_20180925.txt\n"
                      "bcs balance_00122223_20180925.txt\n"
                      "bcs balance_00123456_20180907.txt\n"
                      "bcs balance_00123456_20180903.txt\n"
                      "bcs balance_00123458_20181015.txt\n"
                      "bcs balance_00122223_20181011.txt\n"
                      "bcs balance_00123458_20180922.txt\n"
                      "bcs balance_00123458_20181005.txt\n"
                      "bcs balance_00123456_20180914.txt\n"
                      "bcs balance_00123456_20180912.txt\n"
                      "bcs balance_00123458_20180918.txt\n"
                      "bcs balance_00123456_20181007.txt\n"
                      "bcs balance_00143456_20181003.txt\n"
                      "bcs balance_00143456_20180911.txt\n"
                      "bcs balance_00143456_20180918.txt\n"
                      "bcs balance_00123458_20180917.txt\n"
                      "bcs balance_00143456_20180905.txt\n"
                      "bcs balance_00123456_20180921.txt\n"
                      "bcs balance_00143456_20180902.txt\n"
                      "bcs balance_00123458_20181016.txt\n"
                      "bcs balance_00143456_20180924.txt\n"
                      "bcs balance_00123458_20180927.txt\n"
                      "bcs balance_00122223_20180916.txt\n"
                      "bcs balance_00143456_20181005.txt\n"
                      "bcs balance_00123458_20180928.txt\n"
                      "bcs balance_00122223_20181015.txt\n"
                      "bcs balance_00123456_20181013.txt\n"
                      "bcs balance_00122223_20180918.txt\n"
                      "bcs balance_00122223_20181008.txt\n"
                      "bcs balance_00143456_20180916.txt\n"
                      "bcs balance_00123456_20180916.txt\n"
                      "bcs balance_00143456_20180929.txt\n"
                      "bcs balance_00123456_20180918.txt\n"
                      "bcs balance_00122223_20181013.txt\n"
                      "bcs balance_00143456_20181014.txt\n"
                      "bcs balance_00122223_20180917.txt\n"
                      "bcs balance_00143456_20180922.txt\n"
                      "bcs balance_00122223_20180927.txt\n"
                      "bcs balance_00122223_20180921.txt\n"
                      "bcs balance_00123458_20180930.txt\n"
                      "bcs balance_00143456_20180908.txt\n"
                      "bcs balance_00122223_20181010.txt\n"
                      "bcs balance_00123458_20181009.txt\n"
                      "bcs balance_00123456_20180928.txt\n"
                      "bcs balance_00123456_20180910.txt\n"
                      "bcs balance_00123458_20180910.txt\n"
                      "bcs balance_00122223_20180922.txt\n"
                      "bcs balance_00123456_20180926.txt\n"
                      "bcs balance_00123458_20180912.txt\n"
                      "bcs balance_00123458_20180916.txt\n"
                      "bcs balance_00123458_20180913.txt\n"
                      "bcs balance_00123458_20181008.txt\n"
                      "bcs balance_00143456_20180903.txt\n"
                      "bcs balance_00123458_20180907.txt\n"
                      "bcs balance_00122223_20181004.txt\n"
                      "bcs balance_00143456_20180923.txt\n"
                      "bcs balance_00123456_20181004.txt\n"
                      "bcs balance_00123456_20181010.txt\n"
                      "bcs balance_00123456_20180909.txt\n"
                      "bcs balance_00122223_20181016.txt\n"
                      "bcs balance_00123456_20180924.txt\n"
                      "bcs balance_00123456_20180927.txt\n"
                      "bcs balance_00143456_20180917.txt\n"
                      "bcs balance_00143456_20180913.txt\n"
                      "bcs balance_00123456_20181014.txt\n"
                      "bcs balance_00123458_20180921.txt\n"
                      "bcs balance_00143456_20180907.txt\n"
                      "bcs balance_00122223_20180930.txt\n"
                      "bcs balance_00123456_20180922.txt\n"
                      "bcs balance_00143456_20181006.txt\n"
                      "bcs balance_00123456_20181005.txt\n"
                      "bcs balance_00143456_20181002.txt\n"
                      "bcs balance_00123458_20181014.txt\n"
                      "bcs balance_00122223_20180905.txt\n"
                      "bcs balance_00123458_20181018.txt\n"
                      "bcs balance_00143456_20181007.txt\n"
                      "bcs balance_00122223_20180914.txt\n"
                      "bcs balance_00122223_20180915.txt\n"
                      "bcs balance_00143456_20180901.txt\n"
                      "bcs balance_00123458_20181007.txt\n"
                      "bcs balance_00123456_20180920.txt\n"
                      "bcs balance_00122223_20180902.txt\n"
                      "bcs balance_00143456_20180927.txt\n"
                      "bcs balance_00123458_20180925.txt\n"
                      "bcs balance_00123456_20180908.txt\n"
                      "bcs balance_00122223_20181001.txt\n"
                      "bcs balance_00123456_20181012.txt\n"
                      "bcs balance_00123458_20180901.txt\n"
                      "bcs balance_00123458_20181010.txt\n"
                      "bcs balance_00123456_20180915.txt\n"
                      "bcs balance_00123456_20180925.txt\n"
                      "bcs balance_00123456_20181006.txt\n"
                      "bcs balance_00123456_20180904.txt\n"
                      "bcs balance_00123458_20181001.txt\n"
                      "bcs balance_00143456_20180915.txt\n"
                      "bcs balance_00123456_20181003.txt\n"
                      "bcs balance_00122223_20180904.txt\n"
                      "bcs balance_00143456_20180928.txt\n"
                      "bcs balance_00143456_20181016.txt\n"
                      "bcs balance_00143456_20180912.txt\n"
                      "bcs balance_00122223_20180901.txt\n"
                      "bcs balance_00123458_20180904.txt\n"
                      "bcs balance_00122223_20180924.txt\n"
                      "bcs balance_00123458_20180903.txt\n"
                      "bcs balance_00143456_20180906.txt\n"
                      "bcs balance_00123458_20180926.txt\n"
                      "bcs balance_00122223_20180912.txt\n"
                      "bcs balance_00122223_20181014.txt\n"
                      "bcs balance_00123458_20181013.txt\n"
                      "bcs balance_00122223_20180908.txt\n"
                      "bcs balance_00123458_20180929.txt\n"
                      "bcs balance_00123456_20181001.txt\n"
                      "bcs balance_00122223_20181007.txt\n"
                      "bcs balance_00122223_20180923.txt\n"
                      "bcs balance_00123458_20181004.txt\n"
                      "bcs balance_00123458_20180923.txt\n"
                      "bcs balance_00143456_20180919.txt\n"
                      "bcs balance_00143456_20181011.txt\n"
                      "bcs balance_00122223_20180920.txt\n"
                      "bcs balance_00122223_20180903.txt\n"
                      "bcs balance_00123456_20180906.txt\n"
                      "bcs balance_00122223_20180926.txt\n"
                      "bcs balance_00143456_20181012.txt\n"
                      "bcs balance_00143456_20180909.txt\n"
                      "bcs balance_00123456_20180901.txt\n"
                      "bcs balance_00143456_20181001.txt\n"
                      "bcs balance_00143456_20180910.txt\n"
                      "bcs balance_00143456_20180930.txt\n"
                      "bcs balance_00122223_20181003.txt\n"
                      "bcs balance_00122223_20181012.txt\n"
                      "bcs balance_00143456_20181008.txt\n"
                      "bcs balance_00123456_20181011.txt\n"
                      "bcs balance_00123456_20180919.txt\n"
                      "bcs balance_00123458_20181002.txt\n"
                      "bcs balance_00123456_20181002.txt\n"
                      "bcs balance_00123456_20180911.txt\n"
                      "bcs balance_00143456_20180926.txt\n"
                      "bcs balance_00122223_20180909.txt\n"
                      "bcs balance_00123458_20180906.txt\n"
                      "bcs balance_00122223_20180919.txt\n"
                      "bcs balance_00123456_20180913.txt\n"
                      "bcs balance_00123458_20180909.txt\n"
                      "bcs balance_00123458_20180919.txt\n"
                      "bcs balance_00122223_20180928.txt\n"
                      "bcs balance_00143456_20180914.txt\n"
                      "bcs balance_00123458_20180924.txt\n"
                      "bcs balance_00123458_20180915.txt\n"
                      "bcs balance_00143456_20180921.txt\n"
                      "bcs balance_00143456_20181010.txt\n"
                      "bcs balance_00122223_20181005.txt\n"
                      "bcs balance_00122223_20180907.txt\n"
                      "bcs balance_00123456_20180930.txt\n"
                      "bcs balance_00123458_20181003.txt\n"
                      "bcs balance_00143456_20181009.txt\n"
                      "bcs balance_00143456_20181013.txt\n"
                      "bcs balance_00123458_20180920.txt\n"
                      "bcs balance_00123456_20181008.txt\n"
                      "bcs balance_00123456_20180923.txt\n"
                      "bcs balance_00123456_20180929.txt\n"
                      "bcs balance_00143456_20180920.txt\n"
                      "bcs balance_00123458_20181012.txt\n"
                      "bcs balance_00123458_20181006.txt\n"
                      "bcs balance_00122223_20181006.txt\n"
                      "bcs balance_00123458_20180911.txt\n"
                      "bcs balance_00122223_20180911.txt\n"
                      "bcs balance_00122223_20180913.txt\n"
                      "bcs balance_00123458_20180902.txt\n"
                      "bcs balance_00123456_20180917.txt\n"
                      "bcs balance_00123456_20181009.txt\n"
                      "bcs balance_00122223_20180906.txt\n"
                      "bcs balance_00122223_20180910.txt\n"
                      "Broker:bcs Account:00123458 Files:47 "
                      "Last date:20181018\n"
                      "Broker:bcs Account:00122223 Files:45 "
                      "Last date:20181016\n"
                      "Broker:bcs Account:00143456 Files:45 "
                      "Last date:20181016\n"
                      "Broker:bcs Account:00123456 Files:43 "
                      "Last date:20181014\n"
                      "Broker:ib Account:00100001 Files:47 "
                      "Last date:20181018\n"
                      "Broker:ib Account:00100003 Files:46 "
                      "Last date:20181017\n"
                      "Broker:ib Account:00100002 Files:47 "
                      "Last date:20181018\n"
                      "Broker:otkritie Account:03934523 Files:46 "
                      "Last date:20181017\n"
                      "Broker:otkritie Account:03934520 Files:47 "
                      "Last date:20181018\n";
    auto path_ftp = boost::filesystem::path{"./../misc/ftp"};
    FTPdriver res(path_ftp);
    EXPECT_EQ(ans, res.FTPresult());
}